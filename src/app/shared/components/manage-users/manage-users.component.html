<div class="container-table">
    <p-table #dt2 [value]="users" [scrollable]="true" scrollHeight="400px" [tableStyle]="{'width': 'auto'}"
    [globalFilterFields]="['dni', 'apellido', 'nombre', 'ciclo','grado','concert']">
    <ng-template pTemplate="caption">
        <div class="flex">
            <p-iconField iconPosition="right" class="ml-auto">
                <p-inputIcon>
                    <i class="pi pi-search"></i>
                </p-inputIcon>
                <input 
                pInputText 
                type="text" 
                (input)="dt2.filterGlobal($any($event.target).value, 'contains')" 
                placeholder="Buscar..." />
            </p-iconField>
        </div>
    </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="dni">
                    DNI <p-sortIcon field="dni" />
                </th>
                <th pSortableColumn="apellido">
                    Apellido <p-sortIcon field="apellido" />
                </th>
                <th pSortableColumn="nombre">
                    Nombre <p-sortIcon field="nombre" />
                </th>
                <th pSortableColumn="ciclo">
                    Ciclo <p-sortIcon field="ciclo" />
                </th>
                <th pSortableColumn="grado">
                    Grado <p-sortIcon field="grado" />
                </th>
                <th pSortableColumn="concert">
                    Habilitado
                </th>
                <th>
                    Habilitaciones
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-user>
            <tr>
                <td>{{ user.dni }}</td>
                <td>{{ user.apellido }}</td>
                <td>{{ user.nombre }}</td>
                <td>{{ user.ciclo }}</td>
                <td>{{ user.grado }}</td>
                <td>{{ user.habilitaciones }}</td>
                <td><button 
                    type="button" 
                    (click)="showDialog(user.dni)" 
                    pButton 
                    icon="pi pi-user-edit" 
                    size="small">
                </button></td>
            </tr>
        </ng-template>
    </p-table>
    <p-dialog 
        header="Reservas" 
        [resizable]="false" 
        [modal]="true" 
        [maximizable]="true" 
        [(visible)]="dialogVisible" 
        [style]="{width: '75vw'}" 
        [contentStyle]="{height: '300px'}">
        <p-table 
            [value]="concerts" 
            [scrollable]="true"
            scrollHeight="flex" 
            [tableStyle]="{'width': 'auto'}">
            <ng-template pTemplate="header">
            <tr>
                <th>
                    ID
                </th>
                <th>
                    Concert
                </th>
                <th>
                    Fecha funcion
                </th>
                <th>
                    Hora funcion
                </th>
                <th>
                    habilitar
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-concert>
            <tr>
                <td>
                    {{concert.id}}
                </td>
                <td>
                    {{concert.nombre}}
                </td>
                <td>
                    {{concert.fecha}}
                </td>
                <td>
                    {{concert.hora}}
                </td>
                <td><button 
                    type="button" 
                    (click)="habilitar(concert.id,$event)" 
                    pButton 
                    icon="pi pi-user-edit" 
                    severity="success"
                    size="small">
                </button></td>
            </tr>
            <p-confirmDialog></p-confirmDialog>
        </ng-template>
    </p-table>
    <ng-template pTemplate="footer">
        <button 
        type="button"
        pButton
        pRipple 
        icon="pi pi-times" 
        (click)="dialogVisible=false" 
        label="Salir" 
        class="p-button-text">
    </button>
    </ng-template>
    </p-dialog>
</div>